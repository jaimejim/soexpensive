<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>It's so expensive - Finnish supermarket price comparison</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="monospace.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 1. Two-column header: Title/Meta on left, Stats on right -->
    <header class="site-header-grid">
        <!-- Dark mode toggle - top right within header -->
        <label class="theme-toggle-header">
            <input type="checkbox" id="themeToggle"> Dark mode
        </label>

        <div class="header-left">
            <h1 class="site-title">It's so expensive</h1>
            <p class="site-subtitle">Compare grocery prices across Finnish supermarkets. Updated daily.</p>

            <div class="meta-info">
                <div><strong id="metaProducts">--</strong> products tracked</div>
                <div>Last updated: <strong id="metaLastUpdate">--</strong></div>
            </div>
        </div>

        <div class="header-right">
            <div class="insight-item">
                <span class="insight-label">Cheapest overall</span>
                <strong class="insight-value" id="cheapestOverall">--</strong>
            </div>
            <div class="insight-item">
                <span class="insight-label">Cheapest for most items</span>
                <strong class="insight-value" id="cheapestCount">--</strong>
            </div>
            <div class="insight-item">
                <span class="insight-label">Avg price gap (worst vs best)</span>
                <strong class="insight-value" id="priceGap">--</strong>
            </div>
        </div>
    </header>

    <hr>

    <!-- 3. Store Comparison Chart -->
    <section class="chart-section">
        <h2>Store Comparison</h2>

        <figure>
            <pre id="asciiChart">Loading price comparison...</pre>
            <figcaption>Cheapest product count by store</figcaption>
        </figure>

        <table id="storeTable">
            <thead>
                <tr>
                    <th>Store</th>
                    <th>Cheapest Count</th>
                    <th>Avg Price</th>
                    <th>Rank</th>
                </tr>
            </thead>
            <tbody id="storeComparisonBody">
            </tbody>
        </table>
    </section>

    <hr>

    <!-- 4. Products Table -->
    <section class="products-section">
        <h2>Products</h2>

        <!-- Filters grouped -->
        <div class="filter-block">
            <label class="filter-label">Filter products</label>
            <div class="filter-grid">
                <input type="text" id="searchInput" placeholder="Search products...">
                <select id="categoryFilter">
                    <option value="">All categories</option>
                </select>
                <select id="sortBy">
                    <option value="name">Sort: Name</option>
                    <option value="category">Sort: Category</option>
                    <option value="price-low">Sort: Price (low→high)</option>
                    <option value="price-high">Sort: Price (high→low)</option>
                </select>
            </div>
        </div>

        <div id="loading" class="loading-state">
            <span class="loading-text">Loading price comparison</span>
            <span class="loading-dots">...</span>
        </div>

        <div class="table-container">
            <table id="productsTable" class="products-table">
                <thead>
                    <tr>
                        <th class="sticky-col">Product</th>
                        <th>Category</th>
                        <th>Unit</th>
                        <th>S-Market</th>
                        <th>Prisma</th>
                        <th>K-City</th>
                        <th>K-Super</th>
                        <th>Lidl</th>
                        <th>Alepa</th>
                        <th>Best</th>
                    </tr>
                </thead>
                <tbody id="productsTableBody">
                </tbody>
            </table>
        </div>
    </section>

    <script src="app.js"></script>
</body>
</html>
